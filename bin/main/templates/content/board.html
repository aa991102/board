<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:decorate="~{layout/default_layout}">
	
	<th:block layout:fragment="head">
		<title>Board</title>
		
		<link rel="stylesheet" th:href="@{/css/board.css}"/>
		<script type="text/javascript" th:src="@{/js/jquery-3.6.0.min.js}"></script>
		<script type="text/javascript" th:src="@{/js/jquery.tmpl.js}"></script>
		<script type="text/javascript">
			const boardjs = {
				getBoardList: function(){
					$.ajax({
					    url: '/getBoardList',
					    type: 'POST',
					    success: function(data) {
					        console.log(data);
					        $("#listTemplate").tmpl(data.reverse()).appendTo("#list");
					    },
					    error: function(error) {
					        console.error(error);
					    }
					});
				},
				getBoard: function(){
					$.ajax({
					    url: '/getBoard',
					    type: 'POST',
					    success: function(data) {
					        console.log(data);
					        $("#listTemplate").tmpl(data.reverse()).appendTo("#list");
					    },
					    error: function(error) {
					        console.error(error);
					    }
					});
				}
			}
			
			boardjs.getBoardList();
		</script>
		<script id="listTemplate" type="text/x-jquery-tmpl">
			<tr>
				<td>${board_no}</td>
				<td>${title}</td>
				<td>${writer}</td>
				<td>${date}</td>
			</tr>
		</script>
	</th:block>
	
	<body>
		<th:block layout:fragment="header" th:include="@{/fragments/header}"></th:block>
		<div layout:fragment="content" class="content">
			<table id="list">
				<tr>
					<td>글번호</td>
					<td>제목</td>
					<td>작성자</td>
					<td>작성일</td>
				</tr>
			</table>
		</div>
		<th:block layout:fragment="footer" th:include="@{/fragments/footer}"></th:block>
	</body>
</html>